<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Order History</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* Base Styles */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    background: #0b0b0b;
    color: #eee;
    font-family: Segoe UI, system-ui, sans-serif;
    padding: 20px;
    min-height: 100vh;
}

h1 {
    text-align: center;
    margin-bottom: 30px;
    font-size: 1.8rem;
}

.container {
    max-width: 900px;
    margin: 0 auto;
}

.order {
    background: #151515;
    border: 1px solid #222;
    border-radius: 14px;
    margin-bottom: 20px;
    overflow: hidden;
}

.header {
    padding: 18px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    flex-wrap: wrap;
    gap: 12px;
}

.header-left {
    display: flex;
    flex-direction: column;
    gap: 6px;
    flex: 1;
    min-width: 200px;
}

.order-id {
    font-size: .9rem;
    color: #999;
    word-break: break-word;
}

.date {
    font-weight: 600;
    font-size: 1rem;
}

.total {
    color: #00cc66;
    font-weight: 700;
    font-size: 1.1rem;
    white-space: nowrap;
}

.badges {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    align-items: center;
    justify-content: flex-end;
    flex: 1;
    min-width: 200px;
}

.badge {
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
}

.pending { background: #333; color: #ccc; }
.confirmed { background: #1e3a5f; color: #4da3ff; }
.out { background: #3b2f00; color: #ffc107; }
.delivered { background: #003d1f; color: #00cc66; }
.payment { background: #222; color: #aaa; }

.details {
    max-height: 0;
    overflow: hidden;
    transition: max-height .4s ease;
    background: #0f0f0f;
}

.details.open {
    max-height: 1000px;
}

.details-inner {
    padding: 18px;
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
}

.section {
    background: #141414;
    border: 1px solid #222;
    border-radius: 10px;
    padding: 14px;
}

.section h3 {
    margin-bottom: 10px;
    font-size: 1rem;
}

.items li {
    display: flex;
    justify-content: space-between;
    border-bottom: 1px solid #222;
    padding: 10px 0;
    flex-wrap: wrap;
    gap: 8px;
}

.items li:last-child {
    border-bottom: none;
}

.empty {
    text-align: center;
    padding: 60px 20px;
    color: #777;
}

button {
    display: block;
    margin: 40px auto 0;
    padding: 14px 28px;
    border: none;
    border-radius: 10px;
    background: #00cc66;
    color: #000;
    font-weight: 700;
    cursor: pointer;
    font-size: 1rem;
}

/* Tablet Styles (768px and below) */
@media (max-width: 768px) {
    body {
        padding: 15px;
    }
    
    h1 {
        font-size: 1.6rem;
        margin-bottom: 20px;
    }
    
    .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
    
    .header-left, .badges {
        width: 100%;
        min-width: unset;
    }
    
    .badges {
        justify-content: flex-start;
    }
    
    .details-inner {
        padding: 15px;
        gap: 12px;
    }
    
    .section {
        padding: 12px;
    }
    
    button {
        width: 100%;
        max-width: 300px;
        margin-top: 30px;
    }
}

/* Mobile Styles (480px and below) */
@media (max-width: 480px) {
    body {
        padding: 12px;
    }
    
    h1 {
        font-size: 1.4rem;
    }
    
    .header {
        padding: 15px;
    }
    
    .date {
        font-size: 0.95rem;
    }
    
    .total {
        font-size: 1rem;
    }
    
    .badge {
        padding: 4px 10px;
        font-size: 0.7rem;
    }
    
    .details-inner {
        padding: 12px;
        gap: 10px;
    }
    
    .section {
        padding: 10px;
    }
    
    .items li {
        flex-direction: column;
        align-items: flex-start;
        gap: 5px;
        padding: 8px 0;
    }
    
    .order-id {
        font-size: 0.8rem;
    }
    
    button {
        padding: 12px 20px;
        font-size: 0.95rem;
    }
}

/* Small Mobile Styles (360px and below) */
@media (max-width: 360px) {
    h1 {
        font-size: 1.3rem;
    }
    
    .header {
        padding: 12px;
    }
    
    .badges {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
    }
    
    .badge {
        width: 100%;
        justify-content: center;
    }
    
    button {
        padding: 10px 16px;
    }
}

/* Large Screen Styles (1200px and above) */
@media (min-width: 1200px) {
    .container {
        max-width: 1000px;
    }
}
</style>
</head>

<body>

<h1>Your Orders</h1>
<div class="container" id="orders"></div>

<button onclick="location.href='index.html'">
    <i class="fas fa-arrow-left"></i> Back to Store
</button>

<script>
const orders = JSON.parse(localStorage.getItem("orders")) || [];
const container = document.getElementById("orders");

if (!orders.length) {
    container.innerHTML = `
        <div class="empty">
            <i class="fas fa-shopping-bag fa-3x"></i>
            <p>No orders yet</p>
        </div>
    `;
} else {
    orders.slice().reverse().forEach(order => {
        const total = order.items.reduce(
            (sum, i) => sum + (i.price * i.qty), 0
        );

        const statusMap = {
            PENDING: { text:"Order Received", cls:"pending", icon:"clock" },
            CONFIRMED: { text:"Preparing", cls:"confirmed", icon:"box" },
            OUT_FOR_DELIVERY: { text:"Out for Delivery", cls:"out", icon:"truck" },
            DELIVERED: { text:"Delivered", cls:"delivered", icon:"check-circle" }
        };

        const s = statusMap[order.status] || statusMap.PENDING;

        const div = document.createElement("div");
        div.className = "order";

        div.innerHTML = `
            <div class="header">
                <div class="header-left">
                    <span class="date">${new Date(order.createdAt).toLocaleString()}</span>
                    <span class="order-id">${order.id}</span>
                </div>

                <div class="badges">
                    <span class="badge ${s.cls}">
                        <i class="fas fa-${s.icon}"></i> ${s.text}
                    </span>
                    <span class="badge payment">
                        <i class="fas fa-credit-card"></i> ${order.payment}
                    </span>
                    <span class="total">R ${total.toFixed(2)}</span>
                </div>
            </div>

            <div class="details">
                <div class="details-inner">

                    <div class="section">
                        <h3>Delivery Address</h3>
                        <p>${order.address}</p>
                        ${order.note ? `<p><strong>Note:</strong> ${order.note}</p>` : ""}
                    </div>

                    <div class="section">
                        <h3>Items</h3>
                        <ul class="items">
                            ${order.items.map(i => `
                                <li>
                                    <span>${i.name} x${i.qty}</span>
                                    <span>R ${(i.price * i.qty).toFixed(2)}</span>
                                </li>
                            `).join("")}
                        </ul>
                    </div>

                </div>
            </div>
        `;

        const header = div.querySelector(".header");
        const details = div.querySelector(".details");

        header.onclick = () => {
            details.classList.toggle("open");
        };

        container.appendChild(div);
    });
}
</script>

</body>
</html>