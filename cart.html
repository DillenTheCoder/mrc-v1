<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Your Cart</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        /* RESET */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background-color: #0a0a0a;
            color: #f0f0f0;
            min-height: 100vh;
        }

        /* NAVBAR */
        .navbar {
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(to right, #111, #1a1a1a);
            padding: 16px;
            border-bottom: 2px solid #00cc66;
        }

        .logo-text {
            color: #00cc66;
            font-weight: bold;
            font-size: 20px;
        }

        /* STORE */
        .store {
            padding: 16px;
            max-width: 900px;
               padding-bottom: 180px; /* height of checkout box */
            margin: auto;
        }

        /* CART ITEM */
        .cart-item {
            display: grid;
            grid-template-columns: 60px 1fr 36px;
            gap: 100px;
            align-items: center;
            background: #111;
            padding: 14px;
            border-radius: 14px;
            margin-bottom: 14px;
        }

        .cart-item img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
            image-rendering: auto;
            display: block;
        }

        .cart-details h3 {
            font-size: 16px;
            margin-bottom: 4px;
        }

        .cart-details p {
            font-size: 14px;
            color: #aaa;
        }

        .qty-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 8px;
        }

        .qty-controls button {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: none;
            background: #00cc66;
            color: #000;
            font-weight: bold;
            font-size: 18px;
            cursor: pointer;
        }

        .qty-controls span {
            min-width: 20px;
            text-align: center;
        }

        .remove-btn {
            position: absolute;
            margin-left: 270px;
            margin-top: 10px;
            background: none;
            border: none;
            color: #ff4d4d;
            font-size: 20px;
            cursor: pointer;
        }

        /* CHECKOUT BOX */
.checkout-box {
    position: fixed;
    bottom: 12px;        /* space from bottom */
    left: 50%;           /* center horizontally */
    transform: translateX(-50%);
    width: calc(100% - 20px); /* padding on left & right */
    max-width: 1000px;
    background: #151515;
    border: 1px solid #333;
    padding: 16px;
    z-index: 1000;
    border-radius: 14px;
}


        .checkout-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .checkout-row.total {
            font-size: 18px;
            font-weight: bold;
            color: #00cc66;
        }

        .checkout-btn {
            width: 100%;
            padding: 14px;
            background: #00cc66;
            border: none;
            border-radius: 14px;
            font-weight: bold;
            font-size: 16px;
            margin-top: 14px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .checkout-btn:hover {
            transform: scale(1.02);
        }




        /* MOBILE */
        @media (max-width: 480px) {
        .cart-item {
            display: grid;
            position: relative;
            grid-template-columns: 80px 1fr 36px;
            gap: 90px;
            align-items: center;
            background: #111;
            padding: 14px;
            border-radius: 14px;
            margin-bottom: 14px;
        }

        .cart-item img {
            width: 140px;
            height: 140px;
            object-fit: cover;
            border-radius: 10px;
            image-rendering: auto;
            display: block;
        }

        .cart-details h3 {
            font-size: 19px;
            margin-bottom: 5px;
        }

        .cart-details p {
            font-size: 15px;
            margin-top: 5px;
            margin-bottom: 5px;
            color: #aaa;
        }

        .qty-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .qty-controls button {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: none;
            background: #00cc66;
            color: #000;
            font-weight: bold;
            font-size: 20px;
            cursor: pointer;
        }

        .qty-controls span {
            min-width: 20px;
            text-align: center;
        }

        .remove-btn {
            border: none;
            margin-left: 210px;
            margin-top: 13px;
            color: #ff4d4d;
            font-size: 20px;
            cursor: pointer;
        }

        /* CHECKOUT BOX */
        .checkout-box {
            margin-top: 22px;
            padding: 18px;
            background: #151515;
            border-radius: 14px;
            border: 1px solid #333;
        }

        .checkout-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .checkout-row.total {
            font-size: 18px;
            font-weight: bold;
            color: #00cc66;
        }

        .checkout-btn {
            width: 100%;
            padding: 14px;
            background: #00cc66;
            border: none;
            border-radius: 14px;
            font-weight: bold;
            font-size: 16px;
            margin-top: 14px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .checkout-btn:hover {
            transform: scale(1.02);
        }


        
      @media (max-width: 438px) {
        .remove-btn {
            border: none;
            margin-left: 180px;
            margin-top: 13px;
            color: #ff0000;
            font-size: 20px;
            cursor: pointer;
        }
            }

         @media (max-width: 410px) {
        .remove-btn {
            border: none;
            margin-left: 160px;
            margin-top: 13px;
            color: #ff0000;
            font-size: 20px;
            cursor: pointer;
        }
            }


         @media (max-width: 380px) {
        .cart-item {
            display: grid;
            position: relative;
            grid-template-columns: 80px 1fr 36px;
            gap: 30px;
            align-items: center;
            background: #111;
            padding: 14px;
            border-radius: 14px;
            margin-bottom: 14px;
        }

        .cart-item img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 10px;
            image-rendering: auto;
            display: block;
        }

        .cart-details h3 {
            font-size: 15px;
            margin-bottom: 5px;
        }

        .cart-details p {
            font-size: 14px;
            margin-bottom: 5px;
            color: #aaa;
        }

        .qty-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 18px;
        }

        .qty-controls button {
            width: 42px;
            height: 22px;
            border-radius: 8px;
            border: none;
            background: #00cc66;
            color: #000;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
        }

        .qty-controls span {
            min-width: 20px;
            text-align: center;
        }

        .remove-btn {
            border: none;
            margin-left: 180px;
            margin-top: 10px;
            color: #ff4d4d;
            font-size: 20px;
            cursor: pointer;
        }

        /* CHECKOUT BOX */
        .checkout-box {
            margin-top: 22px;
            padding: 18px;
            background: #151515;
            border-radius: 14px;
            border: 1px solid #333;
        }

        .checkout-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .checkout-row.total {
            font-size: 18px;
            font-weight: bold;
            color: #00cc66;
        }

        .checkout-btn {
            width: 100%;
            padding: 14px;
            background: #00cc66;
            border: none;
            border-radius: 14px;
            font-weight: bold;
            font-size: 16px;
            margin-top: 14px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        /* Additional smooth styles */
input:focus, textarea:focus, select:focus {
    outline: none;
    border-color: #00cc66 !important;
    box-shadow: 0 0 0 3px rgba(0, 204, 102, 0.2) !important;
}

button:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

button:active {
    transform: translateY(0);
}

/* Custom scrollbar */
#orderSummary::-webkit-scrollbar {
    width: 6px;
}

#orderSummary::-webkit-scrollbar-track {
    background: #1a1a1a;
    border-radius: 3px;
}

#orderSummary::-webkit-scrollbar-thumb {
    background: #00cc66;
    border-radius: 3px;
}

#orderSummary::-webkit-scrollbar-thumb:hover {
    background: #00ff88;
}
    }
    }
    </style>
</head>

<body>

    

<header class="navbar">
    <span class="logo-text">Your Cart</span>
</header>

<main class="store">
    <div id="cartItems"></div><br><br>

    <div class="checkout-box">
        <div class="checkout-row">
            <span>Subtotal</span>
            <span id="subtotal">R0</span>
        </div>
    <div class="checkout-row">
        <span>Delivery</span>
        <span id="delivery">R0</span>
    </div>

        <div class="checkout-row total">
            <span>Total</span>
            <span id="total">R0</span>
        </div>

<button class="checkout-btn">
    Confirm Order
</button>
    </div>
</main>




<!-- Modal Form -->
<div id="orderModal" style="
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    justify-content: center;
    align-items: center;
    z-index: 2000;
    backdrop-filter: blur(5px);
    opacity: 0;
    transition: opacity 0.3s ease;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
">
    <div style="
        background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
        padding: 30px;
        border-radius: 20px;
        max-width: 500px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        color: #f0f0f0;
        border: 1px solid #333;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        transform: translateY(20px);
        transition: transform 0.3s ease;
    ">
        <!-- Step 1: Order Form -->
        <div id="step1">
            <div style="text-align: center; margin-bottom: 25px;">
                <h2 style="margin: 0 0 8px 0; font-size: 28px; font-weight: 600; background: linear-gradient(45deg, #00cc66, #00ff88);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;">Complete Your Order</h2>
                <p style="color: #aaa; margin: 0; font-size: 14px;">Step 1 of 2: Delivery & Payment</p>
            </div>
            
            <form id="orderForm">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #fff;">üìç Delivery Address</label>
                    <input type="text" id="address" required placeholder="Enter full address including building, floor, etc." 
                        style="width: 100%; 
                               padding: 14px;
                               margin: 0;
                               border-radius: 12px;
                               border: 2px solid #333;
                               background: #222;
                               color: #fff;
                               font-size: 15px;
                               transition: all 0.3s ease;
                               box-sizing: border-box;">
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #fff;">üí≥ Payment Method</label>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <label style="flex: 1; cursor: pointer;">
                            <input type="radio" name="payment" value="Cash" required style="display: none;">
                            <div style="padding: 15px; border: 2px solid #333; border-radius: 12px; text-align: center; 
                                       background: #222; transition: all 0.3s ease;"
                                 onmouseover="this.style.borderColor='#00cc66'" 
                                 onmouseout="this.style.borderColor='#333'">
                                <div style="font-size: 24px;">üíµ</div>
                                <div style="font-weight: 500; margin-top: 5px;">Cash</div>
                            </div>
                        </label>
                        <label style="flex: 1; cursor: pointer;">
                            <input type="radio" name="payment" value="Card" style="display: none;">
                            <div style="padding: 15px; border: 2px solid #333; border-radius: 12px; text-align: center; 
                                       background: #222; transition: all 0.3s ease;"
                                 onmouseover="this.style.borderColor='#00cc66'" 
                                 onmouseout="this.style.borderColor='#333'">
                                <div style="font-size: 24px;">üí≥</div>
                                <div style="font-weight: 500; margin-top: 5px;">Card</div>
                            </div>
                        </label>
                    </div>
                </div>

                <div style="margin-bottom: 25px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #fff;">
                        üìù Order Note <span style="color: #777; font-weight: normal;">(Optional)</span>
                    </label>
                    <textarea id="note" rows="3" placeholder="Any special instructions, dietary restrictions, or requests..." 
                        style="width: 100%; 
                               padding: 14px;
                               margin: 0;
                               border-radius: 12px;
                               border: 2px solid #333;
                               background: #222;
                               color: #fff;
                               font-size: 15px;
                               resize: vertical;
                               transition: all 0.3s ease;
                               box-sizing: border-box;"></textarea>
                </div>

                <div style="display: flex; justify-content: space-between; gap: 15px; margin-top: 25px;">
                    <button type="button" onclick="closeModal()" 
                        style="flex: 1;
                               padding: 16px;
                               border: none;
                               border-radius: 12px;
                               background: #333;
                               color: #fff;
                               font-weight: 600;
                               cursor: pointer;
                               transition: all 0.3s ease;
                               font-size: 16px;">
                        Cancel
                    </button>
                    <button type="button" onclick="showConfirmation()" 
                        style="flex: 1;
                               padding: 16px;
                               border: none;
                               border-radius: 12px;
                               background: linear-gradient(45deg, #00cc66, #00ff88);
                               color: #000;
                               font-weight: 700;
                               cursor: pointer;
                               transition: all 0.3s ease;
                               font-size: 16px;">
                        Review Order
                    </button>
                </div>
            </form>
        </div>

        <!-- Step 2: Confirmation -->
        <div id="step2" style="display: none;">
            <div style="text-align: center; margin-bottom: 25px;">
                <h2 style="margin: 0 0 8px 0; font-size: 28px; font-weight: 600; color: #fff;">Confirm Your Order</h2>
                <p style="color: #aaa; margin: 0; font-size: 14px;">Step 2 of 2: Review & Send</p>
            </div>

            <div style="background: #222; border-radius: 12px; padding: 20px; margin-bottom: 25px;">
                <h3 style="margin: 0 0 15px 0; color: #00cc66; font-size: 18px;">üì¶ Order Summary</h3>
                <div id="orderSummary" style="max-height: 200px; overflow-y: auto;"></div>
                
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #333;">
                    <h3 style="margin: 0 0 15px 0; color: #00cc66; font-size: 18px;">üìç Delivery Address</h3>
                    <p id="confirmAddress" style="margin: 0; color: #fff; line-height: 1.5;"></p>
                </div>
                
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #333;">
                    <h3 style="margin: 0 0 15px 0; color: #00cc66; font-size: 18px;">üí≥ Payment Method</h3>
                    <p id="confirmPayment" style="margin: 0; color: #fff; font-size: 16px;"></p>
                </div>
                
                <div id="confirmNoteSection" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #333; display: none;">
                    <h3 style="margin: 0 0 15px 0; color: #00cc66; font-size: 18px;">üìù Order Note</h3>
                    <p id="confirmNote" style="margin: 0; color: #fff; line-height: 1.5; font-style: italic;"></p>
                </div>
            </div>

            <div style="display: flex; justify-content: space-between; gap: 15px;">
                <button type="button" onclick="goBackToForm()" 
                    style="flex: 1;
                           padding: 16px;
                           border: none;
                           border-radius: 12px;
                           background: #333;
                           color: #fff;
                           font-weight: 600;
                           cursor: pointer;
                           transition: all 0.3s ease;
                           font-size: 16px;">
                    ‚Üê Edit
                </button>
                <button type="button" onclick="sendOrder()" id="sendOrderBtn"
                    style="flex: 1;
                           padding: 16px;
                           border: none;
                           border-radius: 12px;
                           background: linear-gradient(45deg, #00cc66, #00ff88);
                           color: #000;
                           font-weight: 700;
                           cursor: pointer;
                           transition: all 0.3s ease;
                           font-size: 16px;">
                    Send to WhatsApp
                </button>
            </div>
        </div>
    </div>
</div>



<script>
/* =========================
   CONFIG
========================= */
const WHATSAPP_NUMBER = "27846384919"; // CHANGE IF NEEDED
const DELIVERY_FEE = 50;
const FREE_DELIVERY_OVER = 500;

/* =========================
   CART STORAGE
========================= */
function getCart() {
    try {
        const cart = localStorage.getItem("cart");
        return cart ? JSON.parse(cart) : [];
    } catch {
        return [];
    }
}

function saveCart(cart) {
    localStorage.setItem("cart", JSON.stringify(cart));
    renderCart();
}

/* =========================
   CART UI ELEMENTS
========================= */
const cartItemsEl = document.getElementById("cartItems");
const subtotalEl  = document.getElementById("subtotal");
const deliveryEl  = document.getElementById("delivery");
const totalEl     = document.getElementById("total");

/* =========================
   CART RENDER
========================= */
function renderCart() {
    const cart = getCart();
    cartItemsEl.innerHTML = "";

    let subtotal = 0;

    cart.forEach((item, index) => {
        subtotal += item.price * item.qty;

        const div = document.createElement("div");
        div.className = "cart-item";

        div.innerHTML = `
            <img src="${item.image}" alt="${item.name}">
            <div class="cart-details">
                <h3>${item.name}</h3>
                <p>R ${item.price.toFixed(2)} each</p>

                <button class="remove-btn" onclick="removeItem(${index})">‚úï</button>

                <div class="qty-controls">
                    <button onclick="changeQty(${index}, -1)">‚àí</button>
                    <span>${item.qty}</span>
                    <button onclick="changeQty(${index}, 1)">+</button>
                </div>
            </div>
        `;

        cartItemsEl.appendChild(div);
    });

    let delivery = subtotal > FREE_DELIVERY_OVER ? 0 : DELIVERY_FEE;
    let total = subtotal + delivery;

    subtotalEl.textContent = "R " + subtotal.toFixed(2);
    deliveryEl.textContent = delivery === 0 ? "FREE" : "R " + delivery.toFixed(2);
    totalEl.textContent = "R " + total.toFixed(2);
}

/* =========================
   CART ACTIONS
========================= */
function changeQty(index, change) {
    const cart = getCart();
    cart[index].qty += change;

    if (cart[index].qty <= 0) {
        cart.splice(index, 1);
    }

    saveCart(cart);
}

function removeItem(index) {
    const cart = getCart();
    cart.splice(index, 1);
    saveCart(cart);
}

/* =========================
   MODAL CONTROL
========================= */
function openModal() {
    const modal = document.getElementById("orderModal");
    const modalContent = modal.querySelector("div");

    modal.style.display = "flex";

    document.getElementById("step1").style.display = "block";
    document.getElementById("step2").style.display = "none";
    document.getElementById("orderForm").reset();

    setTimeout(() => {
        modal.style.opacity = "1";
        modalContent.style.transform = "translateY(0)";
    }, 10);
}

function closeModal() {
    const modal = document.getElementById("orderModal");
    const modalContent = modal.querySelector("div");

    modal.style.opacity = "0";
    modalContent.style.transform = "translateY(20px)";

    setTimeout(() => {
        modal.style.display = "none";
    }, 300);
}

/* =========================
   CONFIRMATION STEP
========================= */
function showConfirmation() {
    const address = document.getElementById("address").value.trim();
    const paymentInput = document.querySelector('input[name="payment"]:checked');

    if (!address) {
        alert("Please enter your delivery address");
        return;
    }

    if (!paymentInput) {
        alert("Please select a payment method");
        return;
    }

    const cart = getCart();
    if (cart.length === 0) {
        alert("Your cart is empty.");
        return;
    }

    const payment = paymentInput.value;
    const note = document.getElementById("note").value.trim();
    const orderSummary = document.getElementById("orderSummary");

    orderSummary.innerHTML = "";

    cart.forEach(item => {
        const row = document.createElement("div");
        row.style.display = "flex";
        row.style.justifyContent = "space-between";
        row.style.marginBottom = "8px";
        row.style.padding = "8px";
        row.style.background = "#1a1a1a";
        row.style.borderRadius = "8px";

        row.innerHTML = `
            <span>${item.name}</span>
            <strong>x${item.qty}</strong>
        `;

        orderSummary.appendChild(row);
    });

    document.getElementById("confirmAddress").textContent = address;
    document.getElementById("confirmPayment").innerHTML =
        `${payment === "Cash" ? "üíµ" : "üí≥"} ${payment}`;

    const noteSection = document.getElementById("confirmNoteSection");
    if (note) {
        document.getElementById("confirmNote").textContent = note;
        noteSection.style.display = "block";
    } else {
        noteSection.style.display = "none";
    }

    document.getElementById("step1").style.display = "none";
    document.getElementById("step2").style.display = "block";
}

function goBackToForm() {
    document.getElementById("step2").style.display = "none";
    document.getElementById("step1").style.display = "block";
}

/* =========================
   SEND TO WHATSAPP
========================= */
function sendOrder() {
    const cart = getCart();
    const address = document.getElementById("address").value.trim();
    const payment = document.querySelector('input[name="payment"]:checked').value;
    const note = document.getElementById("note").value.trim();

    let message = "Hello, Please Confirm Availability\n\n*Order Items:*\n";

    cart.forEach(item => {
        message += `‚Ä¢ ${item.name} x${item.qty}\n`;
    });

    message += `\n* Delivery Address:*\n${address}\n`;
    message += `\n* Payment Method:* ${payment}\n`;

    if (note) {
        message += `* Note:* ${note}\n`;
    }

    message += `\n* Order Time:* ${new Date().toLocaleString()}`;

    const whatsappURL =
        `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`;

    localStorage.removeItem("cart");

    const btn = document.getElementById("sendOrderBtn");
    btn.textContent = "Opening WhatsApp...";
    btn.disabled = true;

    setTimeout(() => {
        window.open(whatsappURL, "_blank");
        window.location.href = "thankyou.html";
    }, 700);
}

/* =========================
   EVENTS
========================= */
document.addEventListener("DOMContentLoaded", () => {
    renderCart();

    const checkoutBtn = document.querySelector(".checkout-btn");
    if (checkoutBtn) {
        checkoutBtn.addEventListener("click", openModal);
    }
});

document.addEventListener("keydown", e => {
    if (e.key === "Escape") closeModal();
});

document.getElementById("orderModal")?.addEventListener("click", e => {
    if (e.target.id === "orderModal") closeModal();
});

/* Payment radio visual state */
document.querySelectorAll('input[name="payment"]').forEach(radio => {
    radio.addEventListener("change", function () {
        document.querySelectorAll('label > div').forEach(div => {
            div.style.borderColor = "#333";
            div.style.background = "#222";
        });

        this.parentElement.querySelector("div").style.borderColor = "#00cc66";
        this.parentElement.querySelector("div").style.background = "#1a3333";
    });
});
</script>



</body>
</html>
